{% extends 'docmanag/boitereceptioncoord.html' %} {% block hide %}{% endblock %} {% block messages %}

<div class="card-header msg_head">
    <div class="d-flex bd-highlight">
        <div class="img_cont">
        </div>
        <div class="user_info">
            <span></span>
            <p></p>
        </div>
        <div class="video_cam">
            <span><!--<i class="fas fa-video"></i>--></span>
            <span><!--<i class="fas fa-phone"></i>--></span>
        </div>
    </div>
    <!--<span id="action_menu_btn"><i class="fas fa-ellipsis-v"></i></span>
    <div class="action_menu">
        <ul>
            <li><i class="fas fa-user-circle"></i> View profile</li>
            <li><i class="fas fa-users"></i> Add to close friends</li>
            <li><i class="fas fa-plus"></i> Add to group</li>
            <li><i class="fas fa-ban"></i> Block</li>
        </ul>
    </div>-->
</div>
<div class="card-body msg_card_body">
    {% for message in messages %} {% if message.sender == request.user %}
    <div class="d-flex justify-content-end mb-4">
        <div class="msg_cotainer_send">{{ message }} <span class="msg_time_send">Vous, 8:55 AM, Today</span></div>
        <div class="img_cont_msg"></div>

    </div>
    {% else %}
    <div class="d-flex justify-content-start mb-4">
        <div class="img_cont_msg">

        </div>
        <div class="msg_cotainer">
            {{ message }}
            <span class="msg_time">{{ message.sender.username }}, Le 8:40 AM, Today</span>
        </div>
    </div>
    {% endif %} {% endfor %}


</div>

<div class="card-footer">

    <!--
    <div class="input-group">
        <div class="input-group-append">
            <span class="input-group-text attach_btn"><i class="fas fa-paperclip"></i></span>
        </div>
        <textarea name="" class="form-control type_msg" placeholder="Type your message..."></textarea>
        <div class="input-group-append">
            <span class="input-group-text send_btn"><i class="fas fa-location-arrow"></i></span>
        </div>
    </div>-->
</div>


<script>
    $(function() {
        $('#user{{receiver.id}}').addClass('active');
        //Call receive function each 1 seconds to check for new messages in the database
        setInterval(receive, 20000)
    })
</script>
{% endblock %} {%block sender %}
<diV class="col-md-12">
    <form id="chat-box" class="form-group" method="post">
        {% csrf_token %}
        <div class="row">

            <input type="hidden" name="env_id" id="end_id" value="{{env_id}}" />
            <input type="hidden" name="sender" id="sender" value="{{sender}}" />
            <input type="hidden" name="receiver" id="receiver" value="{{receiver}}" />


        </div>
        <div class="chat-input-holder">

            <textarea id="id_message" class="chat-input" name="message" type="text" placeholder="Type your message.."></textarea>
            <button class="input-group-text send_btn" style="background-color: rgb(218, 12, 12); width: 105px;"><i class="fas fa-location-arrow"></i></button>
        </div>






</div>


</form>
</diV>{% endblock %}